#!/usr/bin/env node
import dotenv from 'dotenv';
dotenv.config();
import { createClient } from '@supabase/supabase-js';

const { VITE_SUPABASE_URL: SUPABASE_URL, VITE_SUPABASE_ANON_KEY: SUPABASE_KEY } = process.env;
if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error('Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const Y8 = {
  'CEO': 200000,
  'CTO': 180000,
  'CMO': 180000,
  'Business Coach': 80000,
  'Marketing Manager 1': 120000,
  'Marketing Manager 2': 100000,
  'Marketing Manager 3': 100000,
  'Marketing Manager 4': 100000,
  'CFO': 150000,
  'Book Keeper 1': 150000,
  'Book Keeper 2': 150000,
  'Book Keeper 3': 150000,
  'Book Keeper 4': 150000,
  'VP Sales': 180000,
  'Account Manager 1': 100000,
  'Account Manager 2': 100000,
  'Account Manager 3': 100000,
  'Account Manager 4': 100000,
  'Account Manager 5': 100000,
  'Account Manager 6': 100000,
  'Account Manager 7': 100000,
  'Account Manager 8': 100000,
  'Product Manager 1': 130000,
  'Product Manager 2': 110000,
  'Product Manager 3': 110000,
  'Product Manager 4': 110000,
  'Product Manager 5': 110000,
  'Product Manager 6': 110000,
  'UX/UI Designer 1': 120000,
  'UX/UI Designer 2': 100000,
  'UX/UI Designer 3': 100000,
  'UX/UI Designer 4': 100000,
  'UX/UI Designer 5': 100000,
  'UX/UI Designer 6': 100000,
  'Developer 1': 120000,
  'Developer 2': 100000,
  'Developer 3': 100000,
  'Developer 4': 100000,
  'Developer 5': 100000,
  'Developer 6': 100000,
  'Developer 7': 100000,
  'Developer 8': 100000,
  'Developer 9': 100000,
  'Developer 10': 100000,
  'Customer Support 1 - Lead': 100000,
  'Customer Support 2': 80000,
  'Customer Support 3': 80000,
  'Customer Support 4': 80000,
  'Customer Support 5': 80000,
  'Customer Support 6': 80000,
  'Marketing Budget': 3000000,
  'Saas Tools/AI Tokens': 700000,
};

const Y9 = {
  'CEO': 200000,
  'CTO': 190000,
  'CMO': 190000,
  'Business Coach': 90000,
  'Marketing Manager 1': 120000,
  'Marketing Manager 2': 120000,
  'Marketing Manager 3': 120000,
  'Marketing Manager 4': 120000,
  'Marketing Manager 5': 120000,
  'Marketing Manager 6': 120000,
  'CFO': 170000,
  'Book Keeper 1': 100000,
  'Book Keeper 2': 100000,
  'Book Keeper 3': 100000,
  'Book Keeper 4': 100000,
  'Book Keeper 5': 100000,
  'UX/UI Designer 1': 120000,
  'UX/UI Designer 2': 120000,
  'UX/UI Designer 3': 120000,
  'UX/UI Designer 4': 120000,
  'UX/UI Designer 5': 120000,
  'UX/UI Designer 6': 120000,
  'Developer 1': 150000,
  'Developer 2': 120000,
  'Developer 3': 120000,
  'Developer 4': 119700,
  'Developer 5': 120000,
  'Developer 6': 119700,
  'Developer 7': 120000,
  'Developer 8': 120000,
  'Developer 9': 119700,
  'Developer 10': 120000,
  'Developer 11': 120000,
  'Developer 12': 120000,
  'Developer 13': 120000,
  'Developer 14': 120000,
  'Customer Support 1': 140000,
  'Customer Support 2': 100000,
  'Customer Support 3': 100000,
  'Customer Support 4': 100000,
  'Customer Support 5': 100000,
  'Customer Support 6': 100000,
  'Customer Support 7': 100000,
  'Customer Support 8': 100000,
  'Customer Support 9': 100000,
  'Customer Support 10': 100000,
  'Customer Support 11': 100000,
  'Customer Support 12': 100000,
  'Customer Support 13': 100000,
  'Customer Support 14': 100000,
  'Marketing Budget': 4000000,
  'Saas Tools/AI Tokens': 1200000,
};

const Y10 = {
  'CEO': 250000,
  'CTO': 200000,
  'CMO': 200000,
  'Business Coach': 100000,
  'Marketing Manager 1': 150000,
  'Marketing Manager 2': 150000,
  'Marketing Manager 3': 150000,
  'Marketing Manager 4': 150000,
  'Marketing Manager 5': 150000,
  'Marketing Manager 6': 150000,
  'Marketing Manager 7': 150000,
  'Marketing Manager 8': 150000,
  'CFO': 170000,
  'Book Keeper 1': 120000,
  'Book Keeper 2': 120000,
  'Book Keeper 3': 120000,
  'Book Keeper 4': 120000,
  'Book Keeper 5': 120000,
  'Book Keeper 6': 120000,
  'Book Keeper 7': 120000,
  'Book Keeper 8': 120000,
  'VP Sales': 199700,
  'Account Manager 1': 120000,
  'Account Manager 2': 100000,
  'Account Manager 3': 100000,
  'Account Manager 4': 100000,
  'Account Manager 5': 99700,
  'Account Manager 6': 100000,
  'Account Manager 7': 100000,
  'Account Manager 8': 100000,
  'Account Manager 9': 100000,
  'Account Manager 10': 100000,
  'Account Manager 11': 100000,
  'Account Manager 12': 100000,
  'Product Manager 1': 180000,
  'Product Manager 2': 150000,
  'Product Manager 3': 150000,
  'Product Manager 4': 150000,
  'Product Manager 5': 150000,
  'Product Manager 6': 150000,
  'Product Manager 7': 149700,
  'Product Manager 8': 150000,
  'UX/UI Designer 1': 179700,
  'UX/UI Designer 2': 150000,
  'UX/UI Designer 3': 150000,
  'UX/UI Designer 4': 150000,
  'UX/UI Designer 5': 150000,
  'UX/UI Designer 6': 150000,
  'UX/UI Designer 7': 150000,
  'UX/UI Designer 8': 150000,
  'Developer 1': 150000,
  'Developer 2': 120000,
  'Developer 3': 120000,
  'Developer 4': 120000,
  'Developer 5': 120000,
  'Developer 6': 120000,
  'Developer 7': 120000,
  'Developer 8': 120000,
  'Developer 9': 120000,
  'Developer 10': 120000,
  'Developer 11': 120000,
  'Developer 12': 120000,
  'Developer 13': 120000,
  'Developer 14': 120000,
  'Developer 15': 120000,
  'Developer 16': 120000,
  'Customer Support 1': 140000,
  'Customer Support 2': 100000,
  'Customer Support 3': 100000,
  'Customer Support 4': 100000,
  'Customer Support 5': 100000,
  'Customer Support 6': 100000,
  'Customer Support 7': 100000,
  'Customer Support 8': 100000,
  'Customer Support 9': 100000,
  'Customer Support 10': 100000,
  'Customer Support 11': 100000,
  'Customer Support 12': 100000,
  'Customer Support 13': 100000,
  'Customer Support 14': 100000,
  'Marketing Budget': 5000000,
  'Saas Tools/AI Tokens': 1500000,
};

const ORDER = {
  Y8: ['CEO','CTO','CMO','Business Coach','Marketing Manager 1','Marketing Manager 2','Marketing Manager 3','Marketing Manager 4','CFO','Book Keeper 1','Book Keeper 2','Book Keeper 3','Book Keeper 4','VP Sales','Account Manager 1','Account Manager 2','Account Manager 3','Account Manager 4','Account Manager 5','Account Manager 6','Account Manager 7','Account Manager 8','Product Manager 1','Product Manager 2','Product Manager 3','Product Manager 4','Product Manager 5','Product Manager 6','UX/UI Designer 1','UX/UI Designer 2','UX/UI Designer 3','UX/UI Designer 4','UX/UI Designer 5','UX/UI Designer 6','Developer 1','Developer 2','Developer 3','Developer 4','Developer 5','Developer 6','Developer 7','Developer 8','Developer 9','Developer 10','Customer Support 1 - Lead','Customer Support 2','Customer Support 3','Customer Support 4','Customer Support 5','Customer Support 6','Marketing Budget','Saas Tools/AI Tokens'],
  Y9: ['CEO','CTO','CMO','Business Coach','Marketing Manager 1','Marketing Manager 2','Marketing Manager 3','Marketing Manager 4','Marketing Manager 5','Marketing Manager 6','CFO','Book Keeper 1','Book Keeper 2','Book Keeper 3','Book Keeper 4','Book Keeper 5','UX/UI Designer 1','UX/UI Designer 2','UX/UI Designer 3','UX/UI Designer 4','UX/UI Designer 5','UX/UI Designer 6','Developer 1','Developer 2','Developer 3','Developer 4','Developer 5','Developer 6','Developer 7','Developer 8','Developer 9','Developer 10','Developer 11','Developer 12','Developer 13','Developer 14','Customer Support 1','Customer Support 2','Customer Support 3','Customer Support 4','Customer Support 5','Customer Support 6','Customer Support 7','Customer Support 8','Customer Support 9','Customer Support 10','Customer Support 11','Customer Support 12','Customer Support 13','Customer Support 14','Marketing Budget','Saas Tools/AI Tokens'],
  Y10: ['CEO','CTO','CMO','Business Coach','Marketing Manager 1','Marketing Manager 2','Marketing Manager 3','Marketing Manager 4','Marketing Manager 5','Marketing Manager 6','Marketing Manager 7','Marketing Manager 8','CFO','Book Keeper 1','Book Keeper 2','Book Keeper 3','Book Keeper 4','Book Keeper 5','Book Keeper 6','Book Keeper 7','Book Keeper 8','VP Sales','Account Manager 1','Account Manager 2','Account Manager 3','Account Manager 4','Account Manager 5','Account Manager 6','Account Manager 7','Account Manager 8','Account Manager 9','Account Manager 10','Account Manager 11','Account Manager 12','Product Manager 1','Product Manager 2','Product Manager 3','Product Manager 4','Product Manager 5','Product Manager 6','Product Manager 7','Product Manager 8','UX/UI Designer 1','UX/UI Designer 2','UX/UI Designer 3','UX/UI Designer 4','UX/UI Designer 5','UX/UI Designer 6','UX/UI Designer 7','UX/UI Designer 8','Developer 1','Developer 2','Developer 3','Developer 4','Developer 5','Developer 6','Developer 7','Developer 8','Developer 9','Developer 10','Developer 11','Developer 12','Developer 13','Developer 14','Developer 15','Developer 16','Customer Support 1','Customer Support 2','Customer Support 3','Customer Support 4','Customer Support 5','Customer Support 6','Customer Support 7','Customer Support 8','Customer Support 9','Customer Support 10','Customer Support 11','Customer Support 12','Customer Support 13','Customer Support 14','Marketing Budget','Saas Tools/AI Tokens'],
};

(async () => {
  const { data: row, error } = await supabase.from('assumptions').select('data').eq('id','default').single();
  if (error) { console.error('Fetch error:', error); process.exit(1); }
  const data = row?.data || {};
  data.opex = data.opex || {};
  data.opexOrder = data.opexOrder || {};
  data.opex.Y8 = Y8;
  data.opex.Y9 = Y9;
  data.opex.Y10 = Y10;
  data.opexOrder.Y8 = ORDER.Y8;
  data.opexOrder.Y9 = ORDER.Y9;
  data.opexOrder.Y10 = ORDER.Y10;
  const { error: upErr } = await supabase.from('assumptions').upsert({ id: 'default', data }, { returning: 'minimal' });
  if (upErr) { console.error('Upsert error:', upErr); process.exit(1); }
  console.log('Updated Y8â€“Y10 in Supabase with screenshot values.');
})();
